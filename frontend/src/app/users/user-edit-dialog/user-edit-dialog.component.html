<div class="dark:bg-gray-900 dark:text-white min-w-[600px]">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-semibold" mat-dialog-title>
      {{ isNewUser ? 'Crear Nuevo Usuario' : 'Editar Usuario' }}
    </h2>
    <button mat-icon-button (click)="cancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  
  <mat-dialog-content>
    <form [formGroup]="userForm" class="py-2">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Nombre -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="first_name" placeholder="Ingrese el nombre">
          <mat-error *ngIf="userForm.get('first_name')?.hasError('required')">
            El nombre es requerido
          </mat-error>
          <mat-error *ngIf="userForm.get('first_name')?.hasError('maxlength')">
            El nombre debe tener máximo 50 caracteres
          </mat-error>
        </mat-form-field>
        
        <!-- Apellido -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Apellido</mat-label>
          <input matInput formControlName="last_name" placeholder="Ingrese el apellido">
          <mat-error *ngIf="userForm.get('last_name')?.hasError('required')">
            El apellido es requerido
          </mat-error>
          <mat-error *ngIf="userForm.get('last_name')?.hasError('maxlength')">
            El apellido debe tener máximo 50 caracteres
          </mat-error>
        </mat-form-field>
        
        <!-- Email -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="ejemplo@correo.com" type="email">
          <mat-error *ngIf="userForm.get('email')?.hasError('required')">
            El email es requerido
          </mat-error>
          <mat-error *ngIf="userForm.get('email')?.hasError('email')">
            Ingrese un email válido
          </mat-error>
        </mat-form-field>
        
        <!-- Teléfono -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Teléfono</mat-label>
          <input matInput formControlName="phone_number" placeholder="Ej. +57 300 123 4567">
          <mat-error *ngIf="userForm.get('phone_number')?.hasError('pattern')">
            Ingrese un número de teléfono válido
          </mat-error>
        </mat-form-field>
        
        <!-- Documento de Identidad -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Documento de Identidad</mat-label>
          <input matInput formControlName="identity_document" placeholder="Ej. 1020304050">
        </mat-form-field>
        
        <!-- Fecha de Nacimiento -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Fecha de Nacimiento</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="birthdate">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        
        <!-- Rol (solo para administradores) -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Rol</mat-label>
          <mat-select formControlName="role">
            <mat-option *ngFor="let role of roles" [value]="role.value">
              {{ role.label }}
            </mat-option>
          </mat-select>
          <mat-hint *ngIf="!isAdmin">Solo los administradores pueden cambiar el rol</mat-hint>
        </mat-form-field>
        
        <!-- Estado (solo para administradores) -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Estado</mat-label>
          <mat-select formControlName="status">
            <mat-option *ngFor="let status of statuses" [value]="status.value">
              {{ status.label }}
            </mat-option>
          </mat-select>
          <mat-hint *ngIf="!isAdmin">Solo los administradores pueden cambiar el estado</mat-hint>
        </mat-form-field>
      </div>
      
      <!-- Sección para contraseña (solo en creación) -->
      <div *ngIf="isNewUser" class="mt-6">
        <mat-divider class="mb-4"></mat-divider>
        <p class="text-gray-500 dark:text-gray-400 mb-4">
          Se enviará un email al usuario con instrucciones para crear su contraseña.
        </p>
      </div>
    </form>
  </mat-dialog-content>
  
  <mat-dialog-actions align="end">
    <button mat-button (click)="cancel()" class="mr-2">
      Cancelar
    </button>
    <button 
      mat-flat-button 
      (click)="submitForm()"
      color="primary"
      class="bg-emerald-500 hover:bg-emerald-600 text-white"
      [disabled]="userForm.invalid">
      {{ isNewUser ? 'Crear Usuario' : 'Guardar Cambios' }}
    </button>
  </mat-dialog-actions>
</div>
